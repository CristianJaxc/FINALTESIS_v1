{% extends "cliente/pagina_cliente.html" %}
{% load static %}

<h2 style="color:white;">
    {% block tema %}
    Compra Realizada
 {% endblock tema %}
</h2>
{% block contenido %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/dt-1.12.0/af-2.4.0/b-2.2.3/b-html5-2.2.3/b-print-2.2.3/date-1.1.2/r-2.3.0/rr-1.2.8/sc-2.0.6/sp-2.0.1/datatables.min.css"/>

<div class="container-fluid">
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold " style="text-align: center;color:black">
                {% block title %} {% endblock title  %} </h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                  <table class="table table-bordered"  id="example" width="100%" cellspacing="0">
            <thead class="thead-dark">
                <tr>

                    <th scope="col">Nombre Solicitante</th>
                    <th scope="col">Direccion</th>
                     <th scope="col">Fecha de Pedido </th>
                    <th scope="col" style="text-align: center;">Comprobante</th>
                    <th scope="col">Estado </th>
                            <th scope="col">Detalle Compra  </th>
                </tr>
            </thead>
            <tbody>

                {% for order in object_list %}
                {% ifequal order.user.id user.id %}
                <tr>

                      <td>{{order.first_name}}</td>
                        <td>{{order.address }}</td>
                <td>{{order.created}}</td>




                <div class="my-2">

                </div>


                <td class="col-lg-4 mb-4 ">
                      {% if order.image %}
                          {% if order.image %}
                  <img src="/media/{{order.image }}" alt="{{order.image }}"id="myImg" data-toggle="modal" data-target="#myModal" style="width: 50%;margin-left: 35%;" >


      </td>
                  {% else %}
                    <td>
          <img class="img-fluid rounded-top" src="{% static 'img/albergue1.png ' %}"    style="width: 40%;" alt="">



       {% endif %}
                    </td>

                 {% else %}
                         <a href="{% url 'editar_order_cliente' order.id %}" class="btn btn-warning btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-file-alt "></i>
                    </span>
Agregar Comprobante
                </a>
                 {% endif %}


  <td>
      {%  ifequal order.paid True %}
 <a href="#" class="btn btn-success btn-icon-split" style="padding:6%">
Aceptada
 </a>

      {% else %}
   <a href="#" class="btn btn-danger btn-icon-split" style="padding:6%">
Enviado
   </a>
      {% endifequal %}


  </td>
                <div class="my-2">

                </div>


             </td>
<td>
      <a href="{% url 'detalle_order_cliente' order.id %}" class="btn btn-warning btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-file-alt "></i>
                    </span>
Detalle
                </a>
</td>




                </tr>
      {% endifequal %}
       {% endfor %}
            </tbody>
        </table>

{% block edicion %}

{% endblock edicion %}
            </div>
        </div>
    </div>
</div>

<!-- The Modal -->

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Comprobante de Deposito</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
  <img class="modal-content" id="img01">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<!-- REFERENCIA JS -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.12.0/js/dataTables.bootstrap5.min.js"></script>
<script>
$(document).ready(function() {
    $('#example').DataTable( {
       retrieve: true,
        paging: false
     "language": {
            "lengthMenu": "Display _MENU_ records per page",
            "zeroRecords": "No se ha encontrado ninguna Informaci√≥n, Gracias",
            "info": "Numero de Pagina page _PAGE_ de _PAGES_",
            "infoEmpty": "No records available",
            "infoFiltered": "(filtered from _MAX_ total records)",
            "search":"Buscar:",
            "paginate":{
            "next":"siguiente",
            "previous":"anterior",
            }
        },
        dom: 'Bfrtip',
        buttons: [
            'pdf',
        ]
    });

} );
</script>

  <!-- script to set display property -->
        <script>
          // Get the modal
var modal = document.getElementById("myModal");

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById("myImg");
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
img.onclick = function(){
  modal.style.display = "block";
  modalImg.src = this.src;
  captionText.innerHTML = this.alt;
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}
        </script>
{% endblock contenido %}