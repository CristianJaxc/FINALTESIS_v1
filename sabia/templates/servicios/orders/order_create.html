{% extends "base/base.html" %}
{% block titulo %} Tienda SABIA {% endblock %}

{% load static %}
{% load crispy_forms_tags %}
{% block contenido %}
<style>
    .asteriskField {
display: none;
}
input {
  font-family: "Poppins", sans-serif;
}

.signin-signup {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  left: 75%;
  width: 50%;
  transition: 1s 0.7s ease-in-out;
  display: grid;
  grid-template-columns: 1fr;
  z-index: 5;
}

form {
  display: flex;

  justify-content: center;
  flex-direction: column;
  padding: 0rem 5rem;
  transition: all 0.2s 0.7s;
  overflow: hidden;
  grid-column: 1 / 2;
  grid-row: 1 / 2;
}

form.sign-up-form {
  opacity: 0;
  z-index: 1;
}

form.sign-in-form {
  z-index: 2;
}

.title {
  font-size: 2.2rem;
  color: #444;
  margin-bottom: 10px;
}

.input-field {
  max-width: 380px;
  width: 100%;
  background-color: #f0f0f0;
  margin: 10px 0;
  height: 55px;
  border-radius: 55px;
  display: grid;
  grid-template-columns: 15% 85%;
  padding: 0 0.4rem;
  position: relative;
}

.input-field i {
  text-align: center;
  line-height: 55px;
  color: #acacac;
  transition: 0.5s;
  font-size: 1.1rem;
}

.input-field input {
  background: none;
  outline: none;
  border: none;
  line-height: 1;
  font-weight: 600;
  font-size: 1.1rem;
  color: #333;
}

.input-field input::placeholder {
  color: #aaa;
  font-weight: 500;
}
.btn1 {
  width: 150px;
  background-color: #2c843c;
  border: none;
  outline: none;
  height: 49px;
  border-radius: 49px;
  color: #fff;
  text-transform: uppercase;
  font-weight: 600;
  margin: 10px 0;
  cursor: pointer;
  transition: 0.5s;
}
/*Boton Login*/
.btn1:hover {
  background-color: #4d84e2;
}
</style>
<head>

    <link href="{% static 'css/perro.css' %}" rel="stylesheet">
</head>


<div class="container-fluid py-5">
<div class="row ">
    <div class="col-xl-4 col-lg-6 wow slideInUp" data-wow-delay="0.1s">
        <div class="bg-light rounded h-100 p-5">
            <div class="section-title">

                <h1 class="display-6 mb-2" style="text-align:center;">Detalles </h1>
            </div>


            <table class="table">

                 <thead>
                    <tr>
                      <th scope="col">Producto</th>
                      <th scope="col">Nombre</th>
                      <th scope="col">cantidad</th>
                      <th scope="col">Precio</th>
                    </tr>
                     </thead>
                <tbody>
                  {% for item in cart %}

                <tr>
                    <th>
                          {% if item.product.image %}
                <br/>
                <img src="/media/{{item.product.image}}" alt="{{product.image}}"  class="img-fluid" width="100%">
                {% else %}
                <img src="{% static 'imagenes/adopciones/adop1.jpg'  %}" >
                {% endif %}
                    </th>
                                <th>
   <h5>   {{ item.product.name }}    </h5>
                    </th>


                    <th>
   <h5>

       {{ item.quantity }}

   </h5>
                    </th>


                    <th>
   <h5> ${{ item.total_price }}  </h5>
                    </th>
                </tr>
                   {% endfor %}
                </tbody>

            </table>



                   <span class="col">Total: ${{ cart.get_total_price }}</span>
            <hr>
                                           <h2 class="wow fadeInUp" data-wow-delay="0.3s" style="text-align: center;">Cuenta </h2>

            <li class="fas fa-university" style="font-size:125px;margin-left:15%;"></li>
            <ul>
                <li>
                   <h5  class="wow fadeInUp" data-wow-delay="0.6s">N:220477448</h5>

                </li>
                <li>
                        <h5>Cuenta de ahorro</h5>
                </li>
                <li>
                               <h5>Banco Pichincha </h5>
                </li>
            </ul>




        </div>
       <div class="row">
    <div class="col">
         <a href="{% url 'cart_detail' %}" class="button light btn btn-principal">Editar Compra </a>
    </div>
            <div class="col">
                                    <a href="{% url 'product_list' %}" class="button light btn btn-principal">Comprar Mas </a>
 </div>
</div>
    </div>

      {% if user.is_authenticated %}
     <div class="col-xl-6  col-lg-6 wow slideInUp" data-wow-delay="0.3s">
        <div class="container">
               <h3>Porfavor completa los siguientes campos</h3>

  <form method="post",action="." enctype="multipart/form-data">
                    {% csrf_token %}
       <label for="first_name" class="form-label fw-bolder fs-5">Nombre</label>
       <input type="text" class="form-control fs-5" name="first_name"  value="{{user.first_name}}">

       <label for="last_name" class="form-label fw-bolder fs-5">Apellido</label>
       <input type="text" class="form-control fs-5" name="last_name"  value="{{user.last_name}}">

  <!-- <h2>HOLLA : {{form.as_p}}</h2>-->
      <label for="email" class="form-label fw-bolder fs-5">Correo</label>
       <input type="email" class="form-control fs-5" name="email"  value="{{user.email}}">

       <label for="address" class="form-label fw-bolder fs-5">Ubicacion</label>
       <input type="text" class="form-control fs-5" name=" address"  value="{{user.perfil.direccion}}">

       <label for="postal_code" class="form-label fw-bolder fs-5">Codigo Postal </label>
       <input type="text" class="form-control fs-5" name="postal_code" >

       <label for="city" class="form-label fw-bolder fs-5">Ciudad </label>
       <input type="text" class="form-control fs-5" name="city" >

      <label for="image" class="form-label fw-bolder fs-5">Comprobante </label>
       <input type="file" class="form-control fs-5" name="image" >

               <!--     {{ form.as_p  }}-->

            <hr><br>


                    <div class="my-2"></div>
                    <a href="#"class="" style="margin-left: 25%;">
                        <span class="icon text-white-50">
                            <i class="fas fa-check"></i>
                        </span>

                        <input type="submit" class="btn btn-success btn-icon-split" value="Adquirir">
                    </a>



            </form>

        </div>

    </div>
       {% else %}
    <div class="col">
               <div class="dairy-position">
  <div class="dairy-container">
    <svg version="1.1" class="dairy-phil" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="140" height="160" viewBox="0 0 140 160" xml:space="preserve">
      <path class="phil-body-color st0" d="" />
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 500" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
  <g id="Dog">
    <path id="Tail" d="M129.156 353.39s18.97 7.04 66.28-33.353c5.333-4.554 27.983-19.43 20.43-39.663-2.22-5.944 15.814 7.103 10.583 15.475-2.717 4.346 12.914-24.28 8.18-34.94-3.97-8.937.72 2.106 4.522 11.012 2.074 4.856 5.65 14.676 5.65 14.676s1.558-8.87 3.458-12.755c8.08-16.52 8.56-45.826 8.56-45.826s34.53 76.393-31.55 98.266c-41.662 13.79-49.972 26.412-94.348 34.125-11.243 1.954-1.766-7.017-1.766-7.017z" fill="black"/>
    <path d="M131.725 206.136c15.91.61 58.806-5.192 53.423 31.048-3.744 25.213-14.994 39.164-4.563 59.255 9.038 17.408 11.89 28.502 16.813 39.783 12.04 27.59 7.95 41.02-34.52 42.35-7.098.223-8.376-12.084-34.284-12.25-26.646-.17-28.198 5.037-41.466 12.25-32.497 17.668-43.528-14.408-34.09-37.053 4.095-9.828 8.038-23.522 19.154-39.427 13.176-18.852 7.358-47.174 2.518-64.91-10.754-39.405 37.482-31.795 57.015-31.047z" fill="#895F55"/>
    <path d="M78.91 359.963c0-4.394-36.124-11.16-36.124-11.16-3.456 0 .6 27.082.6 27.082 0 4.394 6.807 7.96 10.263 7.96h19c3.454 0 6.26-3.566 6.26-7.96v-15.922zM212.874 372.322s3.067-21.52-.347-21.52c0 0-35.898 4.952-35.898 9.573v16.747c0 4.622 2.77 8.374 6.185 8.374h20.194c3.413 0 9.864-8.552 9.864-13.174z" fill="#4D2B23"/>
    <g id="Left-Leg" fill="#4D2B23">
      <path d="M87.507 256.19c.434 12.968 2.035 4.475 6.184 77.12l.8 65.22-28.64.365-1.05-143.933 22.707 1.228z"/>
      <path d="M65.633 369.15c-5.63 12.8-17.054 35.035-12.244 42.042 4.81 7.008 34.444 5.705 41.1 0 6.657-5.703-1.163-34.223-1.163-34.223l-27.694-7.82z"/>
    </g>
    <g id="Right-Leg" fill="#4D2B23">
      <path d="M168.19 256.062c-3.435 27.338-3.145 44.915-4.84 70.866-1.395 21.39-2.25 50.462-4.228 71.335l28.632.86 3.156-143.896-22.72.835z"/>
      <path d="M160.58 376.31l25.496-7.16s18.27 34.87 13.122 41.843c-5.146 6.974-37.563 5.78-44 0-6.436-5.78 5.38-34.683 5.38-34.683z"/>
    </g>
    <path d="M131.563 117.794c12.363.332 35.983 38.303 51.203 80.91 18.005 50.406 24.254 107.3-13.8 116.045-29.504 6.78-40.665 26.83-40.665 26.83s-11.09-19.587-33.1-25.89c-86.718-24.838 7.642-198.668 36.363-197.896z" fill="#895F55"/>
    <path d="M131.053 108.91c12.27.33 35.705 38.294 50.803 80.9 17.86 50.4 24.05 107.292-13.72 116.045-29.285 6.786-40.367 26.84-40.367 26.84s-11.007-19.585-32.848-25.883c-86.066-24.82 7.624-198.67 36.13-197.903z" fill="#4D2B23"/>
    <g id="Head">
      <g id="Skull-and-Ears" fill="#895F55">
        <path d="M135.31 39.158c33.32 1.967 58.817 29.84 56.906 62.207-1.91 32.365-30.51 57.045-63.83 55.078-33.317-1.967-58.815-29.84-56.904-62.206 1.91-32.366 30.512-57.046 63.83-55.08z"/>
        <path d="M188.994 116.853c.778-13.172-21.524-23.568-35.064-24.368 0 0-51.37-2.97-52.575-2.917-13.232.576-30.083 8.22-30.796 20.293l7.894 63.116c.133 31.932 15.4 42.738 28.11 46.2 9.09 2.474 16.873 1.19 16.873 1.19 6.28 1.113 11.743 1.506 16.496 1.32 32.212-1.272 31.822-29.217 32.5-40.695l16.56-64.137z"/>
        <g id="Ears">
          <path id="left-ear" d="M124.95 59.473c-3.293-6.975-22.013-28.028-35.04-30.564-13.026-2.537-32.915 9.01-43.118 15.348-32.86 20.41-38.325 44.944-38.61 54.772-.288 9.828 30.263 60.24 34.55 60.084 4.288-.156 3.494-70.25 28.584-90.82 6.18-5.065 32.668 1.847 38.364 2.465 5.695.617 18.035-5.438 15.27-11.287z"/>
          <path d="M162.154 69.546c-9.546-1.272-9.677-23.323 10.346-22.146 20.022 1.176 48.342 12.133 58.256 23.668 55.89 65.025-26.567 97.89-32.823 96.68-6.255-1.214 27.045-49.51-11.378-82.854-6.76-5.866-14.855-14.075-24.4-15.348z"/>
        </g>
        <path d="M71.957 86.188c-.397 6.725-12.75 21.59-16.78 30.163-1.47 3.13 8.052-1.97 10.348.612 1.978 2.227 7.05 5.48 8.79 7.442 1.373 1.545.695 7.01 3.18 4.804M188.987 78.74c-.93 7.63-1.673 23.65 1.604 30.606 1.113 2.358 8.324 15.485 8.318 15.49-2.895 2.573-9.01 3.65-11.906 6.22-1.1.978-1.834 6.816-3.857 6.697M106.182 53.71c10.57-18.07 9.962-51.505 43.24-44.827 1.276.256-2.645.204-3.843.708-2.18.917-4.173 2.763-5.96 4.323-6.133 5.36-7.064 11.24-10.514 17.14-.65 1.11-1.167 3.67-1.167 3.67s1.902-1.255 2.95-1.695c8.02-3.373 13.762-6.666 23.17-6.11l3.788.223s-1.97-.533-2.84-.167c-3.266 1.373-19.53 14.11-16.254 17.736.608.673 11.374-2.134 13.424-2.013l1.894.112s-2.15.11-2.896.763c-3.06 2.672-17.69 12.174-15.14 14.997"/>
      </g>
      <path id="Nose" d="M125.393 190.23c5.084-8.277 14.243-7.736 18.57-3.192s4.874 13.838-1.262 21.37c-12.175 14.945-27.178 9.444-36.633-2.163-6.135-7.532-3.57-17.366 1.262-21.37 4.83-4.003 13.99-3.462 18.063 5.356z" fill="black"/>
      <g id="Eyes">
        <path d="M160.1 94.853c7.51.444 13.135 8.79 12.554 18.626-.58 9.836-7.15 17.462-14.658 17.02-7.51-.445-13.135-8.79-12.554-18.627.58-9.837 7.15-17.463 14.658-17.02zM102.99 91.482c7.51.443 13.136 8.79 12.555 18.626-.58 9.836-7.15 17.462-14.658 17.02-7.51-.444-13.135-8.79-12.554-18.627.58-9.836 7.15-17.462 14.658-17.018z" fill="#fff"/>
        <g id="pupils" fill="#895F55">
          <path d="M153.025 99.05c3.755.223 6.63 3.365 6.413 7.014-.215 3.65-3.438 6.432-7.193 6.21-3.755-.22-6.628-3.364-6.413-7.013.215-3.648 3.44-6.43 7.193-6.21zM95.917 95.68c3.754.22 6.628 3.364 6.412 7.013-.216 3.65-3.44 6.43-7.194 6.21-3.755-.222-6.628-3.365-6.413-7.014.216-3.65 3.44-6.432 7.194-6.21z"/>
        </g>
      </g>
    </g>
  </g>
</svg>

      <path class="phil-arm-left st4" d="" />
      <path class="phil-arm-right st4" d="" />
      <path class="phil-leg-left st4" d="" />
      <path class="phil-leg-right st4" d="" />
    </svg>
    <span class="dairy-message">
Para poder, adquirir nuestros Productos:
<!--      <a class="dairy-link" href="{% url 'signup_voluntario' %}">Registrate </a>-->
       <a class="dairy-link"       href="#myModal5"  data-toggle="modal" >Registrate</a>

      <hr style="margin:-1%;">
        Si tienes cuenta:
                     <a class="dairy-link"       href="#myModal"  data-toggle="modal" >Iniciar Seción </a>


         <!--    <a class="dairy-link" href="{% url 'login' %}" >Iniciar Seción </a>-->
      <span class="dairy-close" style="color:white;background-color:green;padding-left:4px;">X</span>
    </span>
  </div>
</div>

    </div>

        {% endif %}



</div>

</div>

<div class="text-center">
      <!--          <a href="#myModal" class="trigger-btn" data-toggle="modal">Click to Open Login Modal</a>-->
            </div>

        <!-- Modal HTML -->
      {% if user.is_authenticated %}
        <div id="myModal55" class="modal fade">

        </div>

  {% else %}
<div id="myModal" class="modal fade">
            <div class="modal-dialog modal-login">
                <div class="modal-content">
                    <div class="modal-header">
                               <h2 class="title">Iniciar sesión</h2>
                        <button type="button" class="close btnClose" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">



                              <form method="post" action="{% url 'login' %}" class="sign-in-form">
                        {% csrf_token %}

          <div class="input-field">
            <i class="fas fa-user"></i>
            <input type="text" placeholder="Usuario" name="username" id="Usuario" />
          </div>

               <div class="input-field">
            <i class="fas fa-lock"></i>
            <input type="password" placeholder="Contraseña" name="password" />
          </div>


          <input href="{% url
                                    'order-create'%}" type="submit" value="Iniciar Sesión" class="btn1 solid"  />
                        </form>
                    </div>
                    <div class="modal-footer btnAdd" >No tienes una Cuenta? <a href="#">Crear Cuenta </a></div>
                </div>
            </div>
        </div>
  <div id="myModal5" class="modal fade ">
            <div class="modal-dialog modal-login">
                <div class="modal-content">
                    <div class="modal-header">
                                <h2 class="title">Registro</h2>
                        <button type="button" class="close btnClose" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">

  <form method="post", enctype="multipart/form-data"  class="sign-in-form form5">
                        {% csrf_token %}


    <p>
           <div class="input-field">
            <i class="fas fa-user"></i>

            <input type="text" placeholder="Usuario" name="username" id="Usuario" />

          </div>

               <div class="input-field">
            <i class="fas fa-lock"></i>
            <input type="password" placeholder="Contraseña" name="password1" />
          </div>

     <div class="input-field">
            <i class="fas fa-lock"></i>
            <input type="password" placeholder="Contraseña Confirmación" name="password2" />
          </div>


   <!--  <div>
     <div class="input" id="loco1">
      {{ field }}
     </div>
     </div>-->
    </p>

   <div>

         </div>
                      <input type="submit" value="Siguiente" class="btn1 solid"/>


{% if form5.errors %}
      {% for field in form5 %}
  {% for error in field.errors %}

        <script>
            Swal.fire({
              title: 'Cuidado',
              text: '{{ error }}',
              icon: 'warning',
              confirmButtonText: 'Ok'
})
        </script>

 {% endfor %}

  {% endfor %}
      {% endif %}

{% if next %}
    {% if user.is_authenticated %}
              <script>
            Swal.fire({
              title: 'Inicio Cliente',
              text: 'No tiene acceso a la Pagina, Error , Contraseña/Nombre',
              icon: 'info',
              confirmButtonText: 'Ok'
})
        </script>

    {% else %}
                     <script>
            Swal.fire({
              title: 'Inicio Cliente',
              text: ' Inicie Sesion Para continuar , Porfavor.',
              icon: 'info',
              confirmButtonText: 'Ok'
})
        </script>

    {% endif %}
{% endif %}



        </form>
                    </div>
                    <div class="modal-footer btnAdd5">Ya tienes una Cuenta  <a href="#">Inicia Sesion</a></div>
                </div>
            </div>
        </div>

  {% endif %}

<script>
$( document ).ready(function() {
    $('#myModal').modal('toggle')
});

$('.btnClose').on('click', function(){
          $('#myModal').modal('hide');
});

$('.btnAdd').on('click', function(){
        $('#myModal').modal('hide');
        $('#myModal5').modal('show');
    });
$('.btnAdd5').on('click', function(){
        $('#myModal5').modal('hide');
        $('#myModal').modal('show');
    });




</script>
<!--

<div class="row" >
      <div class="col-md-3 col-sm-12 col-lg-4 wow fadeIn" data-wow-delay="0.2s">
 {% for item in cart %}
          <ul>
                <li>
                    {{ item.quantity }}x {{ item.product.name }}
                    <span>${{ item.total_price }}</span>
                </li>
            {% endfor %}
        </ul>
        <p>Total: ${{ cart.get_total_price }}</p>

      </div>
      <div class="col-lg-8" style="border-style:solid;border-color:black;">

    <form action="." method="post" >
          <div class="form-group">

        {{ form.as_p}}
        <p><input type="submit" value="Comprar"></p>
        {% csrf_token %}
              </div>
    </form>

          </div>
</div>

-->






{% endblock %}